#!/bin/bash

# Test that the prototypes directory exists
if [ ! -d "prototypes" ]; then
    echo "Error: prototypes directory does not exist"
    exit 1
fi

# Test that there are .js files in the prototypes directory
if [ ! "$(ls -A prototypes/*.js)" ]; then
    echo "Error: no .js files found in prototypes directory"
    exit 1
fi

# Test that the public directory exists
if [ ! -d "public" ]; then
    echo "Error: public directory does not exist"
    exit 1
fi

# Test that styles.css exists in the public directory
if [ ! -f "public/styles.css" ]; then
    echo "Error: styles.css not found in public directory"
    exit 1
fi

# Test that mobile.css exists in the public directory
if [ ! -f "public/mobile.css" ]; then
    echo "Error: mobile.css not found in public directory"
    exit 1
fi

# Test that the script can create .html files for each .js file in the prototypes directory
for jsfile in prototypes/*.js; do
    # Extract the filename without the extension
    filename=$(basename "$jsfile" .js)

    # Test that the corresponding .html file does not already exist
    if [ -f "${filename}.html" ]; then
        echo "Error: ${filename}.html already exists"
        exit 1
    fi

    # Test that the script can create the corresponding .html file
    ./createHtmlProto.sh

    # Test that the corresponding .html file was created
    if [ ! -f "${filename}.html" ]; then
        echo "Error: ${filename}.html was not created"
        exit 1
    fi
done

echo "All tests passed"

